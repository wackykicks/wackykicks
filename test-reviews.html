<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Reviews</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
</head>
<body>
    <h1>Test Reviews System</h1>
    <button onclick="addTestReviews()">Add Test Reviews</button>
    <button onclick="checkReviews()">Check Reviews</button>
    <div id="output"></div>

    <script>
        // Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyDogBkY_Xgx8Fw_3P0iOlVgciVArJHjy5Q",
            authDomain: "wackykicks-65cbe.firebaseapp.com",
            projectId: "wackykicks-65cbe",
            storageBucket: "wackykicks-65cbe.appspot.com",
            messagingSenderId: "911540684237",
            appId: "1:911540684237:web:faa772c146ff4acfadb084",
            measurementId: "G-7HWH0SEJN2"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        async function addTestReviews() {
            const output = document.getElementById('output');
            output.innerHTML = 'Adding test reviews...';
            
            // Get a sample product ID (you'll need to replace this with an actual product ID)
            const testProductId = "test-product-123"; // Replace with actual product ID
            
            const testReviews = [
                {
                    productId: testProductId,
                    reviewerName: "John Smith",
                    reviewText: "Great quality sneakers! Very comfortable and stylish. Would definitely recommend.",
                    rating: 5,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                },
                {
                    productId: testProductId,
                    reviewerName: "Sarah Johnson",
                    reviewText: "Good shoes but took a while to break in. Overall satisfied with the purchase.",
                    rating: 4,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                },
                {
                    productId: testProductId,
                    reviewerName: "Mike Wilson",
                    reviewText: "Decent quality for the price. Could be better but not bad overall.",
                    rating: 3,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                }
            ];

            try {
                for (const review of testReviews) {
                    await db.collection("reviews").add(review);
                }
                output.innerHTML = 'Test reviews added successfully!';
            } catch (error) {
                output.innerHTML = 'Error adding reviews: ' + error.message;
                console.error(error);
            }
        }

        async function checkReviews() {
            const output = document.getElementById('output');
            output.innerHTML = 'Checking reviews...';
            
            try {
                const snapshot = await db.collection("reviews").get();
                output.innerHTML = `Found ${snapshot.size} reviews in database:<br>`;
                
                snapshot.forEach(doc => {
                    const review = doc.data();
                    output.innerHTML += `<br>ID: ${doc.id}<br>Product: ${review.productId}<br>Reviewer: ${review.reviewerName}<br>Rating: ${review.rating}/5<br>Text: ${review.reviewText}<br>---<br>`;
                });
            } catch (error) {
                output.innerHTML = 'Error checking reviews: ' + error.message;
                console.error(error);
            }
        }
    </script>
</body>
</html>